# -*- mode: yaml -*-
instances:
  - kali-light

kali-light:
  chef:
    roles:
      - postgresql-server
      - postgresql-kali-rolling
      - couchdb-server
      - faraday-from-sources
      - faraday-cscan
      - faraday-server
    recipes:
      - git
      - faraday::gtk
      - pentester::msf_db
      - pentester::msf_pkg
      - pentester::msf_config
      - pentestenv::faraday_metasploiton_plugin
    json:
      postgresql:
        password:
          postgres: toor
      pentester:
        msf:
          db:
            db: msf
            user: msf
            pass: toor
          msfconsole.rc:
            - load msgrpc Pass=pentest-env
      faraday:
        packages: [git-core, python-msgpack, python-pip]
        git_repository: https://github.com/Sliim/faraday.git
        git_reference: cscan-msfrpc-plugin
        config:
          last_workpace: pentest-env
          couch_uri: http://127.0.0.1:5985
        cscan:
          ips: [172.28.128.0/24]
          websites: []
          config:
            CS_CATEGORIES: network,extra
            CS_SCRIPTS: msf-basic-discovery-nmap.sh,msf-autoscan.sh,msf-autosploit.sh
            CS_NMAP: nmap
            CS_NMAP_ARGS: -p- -O -sT -T5 -Pn --script=default,safe,discovery,version
            CS_MSF_TMP_WS: disabled
            CS_MSF_EXPORT: enabled
            MSFRPC_USER: msf
            MSFRPC_PASS: pentest-env
        service:
          INSTALL_DIR: /opt/faraday
